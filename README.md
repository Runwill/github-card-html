# cardHtml

本仓库为前端静态页面，默认通过浏览器直接打开（如 VS Code 的 Live Server）。与后端的接口基址可在本仓库中进行配置或运行时切换。

## 更改公网/后端映射地址需要修改哪些地方？

如果更改了“后端对外（公网）地址（含端口）”，前端需要同步调整以下配置：

1) 登录页快捷切换的固定地址
- 文件：`login.html`
- 需要修改的字段：
	- `var PUBLIC_URL = 'http://<你的新后端域名或IP>:<端口>'`
	- `function isPublic(u){ ... '你的新后端域名或IP' ... }`（用于识别当前是否已选公网后端，将其中的旧域名替换为新域名）
- 可选：若本地端口也变了（例如 3000 改为 3001），同时修改：
	- `var LOCAL_URL = 'http://localhost:<新端口>'`

2) 统一 API 基址的默认值（运行时也可切换）
- 文件：`function/api/endpoints.js`
- 逻辑说明：该文件会优先读取 `localStorage.apiBase` 作为后端基址；如果没有，则使用内置默认值。
- 需要修改的字段：
	- 将内部默认返回值从 `http://localhost:3000` 改为你的新地址（如需修改默认值）。
- 运行时切换方式（无需改代码）：在登录页点击“切换后端”按钮，会把选中的地址写入 `localStorage.apiBase`，后续页面会自动使用。

3) 清理或手动设置运行时基址（可选）
- 打开浏览器开发者工具 -> Application/存储 -> Local Storage，找到当前站点：
	- 删除或修改 `apiBase`，例如设置为 `http://<你的新后端域名或IP>:<端口>`。

注意：如果你更换的是“前端”对外域名，那么需要在后端的 CORS 白名单中加入新的前端来源（协议+域名/IP+端口完全匹配）。详见后端 README 的“公网映射变更速查”。

## 快速验证
- 进入登录页 `login.html`，点击“切换后端”，消息栏会显示“当前后端：<地址>”。
- 登录/注册请求会使用 `function/api/endpoints.js` 暴露的 `endpoints.api()` 构建地址，例如 `/api/login`、`/api/register` 等。

## 参与贡献

1. Runwill
2. Smal
