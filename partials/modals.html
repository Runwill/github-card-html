<!-- 牌堆/弃牌堆查看器 (由 JS 动态生成，此处占位符已移除) -->

<!-- 加载动画遮罩 -->
<div id="loading-overlay">
  <div>
    <div class="loading-title" id="loading-title"></div>
    <div class="loading-bar-container">
      <div class="loading-bar"></div>
    </div>
  </div>
</div>

<!-- 弹窗背景遮罩 -->
<div id="modal-backdrop" class="modal-backdrop"></div>

<!-- 侧边栏菜单（主菜单） -->
<div id="sidebar-menu" class="panel">
  <li class="sidebar-avatar-row">
    <img id="sidebar-avatar-preview" src="" alt="avatar" />
    <button id="open-account-menu-button" class="sidebar-menu_button" data-i18n="sidebar.account">账号</button>
  </li>
  <li>
    <button id="approve-request-button" class="sidebar-menu_button" data-i18n="sidebar.approvals">审核</button>
  </li>
  <li>
    <button id="announcements-button" class="sidebar-menu_button" data-i18n="sidebar.announcements">更新公告</button>
  </li>
  <li>
    <button id="settings-button" class="sidebar-menu_button" data-i18n="sidebar.settings">设置</button>
  </li>
  <li>
    <button id="theme-toggle-button" class="sidebar-menu_button" data-i18n="theme.toggle.toDark">切换为深色</button>
  </li>
  <li>
    <button id="lang-toggle-button" class="sidebar-menu_button">语言：中文</button>
  </li>
  <li>
    <button id="logout-button" class="sidebar-menu_button" data-i18n="sidebar.logout">退出</button>
  </li>
  
</div>

<!-- 账号菜单（与侧边栏同样式） -->
<div id="account-menu" class="panel">
  <li>
    <button id="account-menu-back" class="sidebar-menu_button" data-i18n="account.menu.back">返回</button>
  </li>
  <li>
    <button id="account-info-button" class="sidebar-menu_button" data-i18n="account.menu.info">名片</button>
  </li>
  <li>
    <button id="update-account-button" class="sidebar-menu_button" data-i18n="account.menu.password">密码</button>
  </li>
  <li>
    <button id="upload-avatar-button" class="sidebar-menu_button" data-i18n="account.menu.avatar">头像</button>
    <input type="file" id="upload-avatar-input" accept="image/*" />
  </li>
</div>

<div id="update-account-modal" class="modal update-modal">
  <div class="modal-header">
    <h2 data-i18n="modal.password.title">密码</h2>
  </div>
  <form id="updateForm" class="modal-form">
    <!-- 隐藏的用户名字段：满足浏览器对密码表单可用性的要求（不会影响样式与提交） -->
    <input type="text" id="pwdUsername" name="username" autocomplete="username"
           aria-hidden="true" tabindex="-1" class="sr-only" />
    <!-- 旧密码用于验证当前身份，autocomplete 使用 current-password -->
    <input type="password" id="oldPassword" name="oldPassword" data-i18n-attr="placeholder" data-i18n-placeholder="modal.password.old" placeholder="旧密码" required autocomplete="current-password">
    <!-- 新密码与确认新密码，autocomplete 使用 new-password -->
    <input type="password" id="newPassword" name="newPassword" data-i18n-attr="placeholder" data-i18n-placeholder="modal.password.new" placeholder="新密码" required autocomplete="new-password">
    <input type="password" id="confirmPassword" name="confirmPassword" data-i18n-attr="placeholder" data-i18n-placeholder="modal.password.confirm" placeholder="确认新密码" required autocomplete="new-password">
    <button type="submit" class="btn btn--primary btn--block" data-i18n="modal.password.update">更新</button>
  </form>
  <div id="responseMessage" class="modal-message"></div>
</div>

<div id="approve-user-modal" class="modal approve-modal">
  <div class="modal-header">
    <h2 data-i18n="modal.approvals.title">审核</h2>
  </div>
  <div id="pending-approvals-modal-content"></div>
</div>

<!--（权限管理改为面板，删除弹窗版本以避免 ID 冲突） -->

<!-- 头像管理弹窗：显示当前头像与上传按钮 -->
<div id="avatar-modal" class="modal update-modal">
  <div class="modal-header">
    <h2 data-i18n="modal.avatar.title">头像</h2>
  </div>
  <div class="modal-form">
  <img id="avatar-modal-preview" alt="avatar">
    <button id="avatar-modal-upload" class="btn btn--primary btn--block" data-i18n="modal.avatar.upload">上传头像</button>
    <div id="avatar-pending-wrap">
      <div data-i18n="modal.avatar.pending">审核中</div>
      <img id="avatar-pending-preview" alt="pending">
    </div>
  </div>
  <div id="avatar-modal-message" class="modal-message"></div>
</div>

<!-- 头像裁剪弹窗 -->
<div id="avatar-crop-modal" class="modal">
  <div class="modal-header"><h2 data-i18n="modal.crop.title">裁剪头像</h2></div>
  <div class="crop-modal-body">
    <div id="avatar-crop-image-container">
      <img id="avatar-crop-image" alt="crop">
    </div>
    <div id="avatar-crop-actions">
  <button id="avatar-crop-cancel" class="btn" data-i18n="modal.crop.cancel">取消</button>
  <button id="avatar-crop-confirm" class="btn btn--primary" data-i18n="modal.crop.confirm">裁剪并上传</button>
    </div>
    <div id="avatar-crop-message" class="modal-message"></div>
  </div>
</div>

  <!-- 名片弹窗（新版样式） -->
  <div id="account-info-modal" class="modal update-modal account-info-modal">
    <div class="account-info__header">
      <img id="account-info-avatar" class="account-info__avatar" alt="avatar" />
      <div class="account-info__title">
        <div class="account-info__name" id="account-info-username">
          <span id="account-info-username-main"></span>
          <!-- 移除内联颜色/字号/外边距，统一由 CSS 控制（与容器 gap 保持一致） -->
          <span id="account-info-username-pending-inline"></span>
          <button id="account-info-username-cancel-inline" class="btn btn--sm" data-i18n="account.info.cancel">撤回</button>
        </div>
        <div class="account-info__role"><span class="badge" id="account-info-role"></span></div>
      </div>
    </div>
    <div class="account-info__body">
      <div class="info-row"><span class="info-label" data-i18n="account.info.username">用户名</span><span class="info-value" id="account-info-username-text"></span></div>
      <div class="account-info__intro">
        <textarea id="account-info-intro" class="intro-textarea" rows="4" maxlength="500" data-i18n-attr="placeholder" data-i18n-placeholder="account.info.placeholder.intro" placeholder="（暂无简介）"></textarea>
        <div id="account-info-intro-pending" class="info-hint"></div>
      </div>
      <div class="account-info__meta">
        <div class="meta-item">
          <span class="meta-label" data-i18n="account.info.userId">用户ID</span>
          <span class="meta-value" id="account-info-id"></span>
        </div>
        <div class="meta-item">
          <span class="meta-label" data-i18n="account.info.createdAt">注册时间</span>
          <span class="meta-value" id="account-info-createdAt"></span>
        </div>
      </div>
    </div>
    <div id="account-info-message" class="modal-message"></div>
  </div>

  <!-- 更新公告弹窗 -->
  <div id="announcements-modal" class="modal ann-modal">
    <div class="modal-header">
      <h2 data-i18n="modal.announcements.title">更新公告</h2>
    </div>
    <div id="announcements-content" class="ann-content"></div>
  </div>

  <!-- 设置菜单（与侧边栏同样式） -->
  <div id="settings-menu" class="panel">
    <li>
      <button id="settings-menu-back" class="sidebar-menu_button" data-i18n="account.menu.back">返回</button>
    </li>
    <li>
      <button id="key-settings-button" class="sidebar-menu_button" data-i18n="sidebar.keySettings">按键设置</button>
    </li>
    <li>
      <button id="game-settings-button" class="sidebar-menu_button" data-i18n="sidebar.gameSettings">对局设置</button>
    </li>
  </div>

  <!-- 按键设置弹窗 -->
  <div id="key-settings-modal" class="modal update-modal">
    <div class="modal-header">
      <h2 data-i18n="modal.keySettings.title">按键设置</h2>
    </div>
    <div class="modal-form">
      <div class="info-row">
        <span class="info-label" data-i18n="keySettings.expandAll">展开所有术语</span>
        <button id="key-bind-expand-all" class="btn btn--sm key-bind-btn">未设置</button>
      </div>
      <div class="info-row">
        <span class="info-label" data-i18n="keySettings.inspect">显示属性</span>
        <button id="key-bind-inspect" class="btn btn--sm key-bind-btn">Ctrl</button>
      </div>
      <div class="info-hint" data-i18n="keySettings.hint">
        按下 Esc 或 Backspace 可清除设置。
      </div>
    </div>
    <div id="key-settings-message" class="modal-message"></div>
  </div>

  <!-- 对局设置弹窗 -->
  <div id="game-settings-modal" class="modal update-modal">
    <div class="modal-header">
      <h2 data-i18n="modal.gameSettings.title">对局设置</h2>
    </div>
    <div class="modal-form">
      <!-- 时机播放速度 -->
      <div class="info-row">
        <span class="info-label" data-i18n="gameSettings.playbackSpeed">时机播放速度</span>
        <div class="setting-control">
          <input type="range" id="game-speed-range" class="setting-slider" min="0" max="1000" step="10" value="0">
          <span id="game-speed-val">0ms</span>
        </div>
      </div>
      <!-- 拖动惯性 -->
      <div class="info-row">
        <span class="info-label" data-i18n="gameSettings.dragInertia">拖动惯性</span>
        <div class="arrow-selector" id="inertia-selector">
          <button type="button" class="arrow-btn" id="inertia-prev">‹</button>
          <span class="arrow-value" id="inertia-value">中等</span>
          <button type="button" class="arrow-btn" id="inertia-next">›</button>
        </div>
      </div>
      <!-- 重置按钮 -->
      <div class="settings-actions">
        <button type="button" id="game-settings-reset" class="btn btn--sm btn--ghost" data-i18n="gameSettings.reset">重置</button>
      </div>
    </div>
    <div id="game-settings-message" class="modal-message"></div>
  </div>
