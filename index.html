<!DOCTYPE html>
<html lang="en">
    
<script type="text/javascript">
    let term_status = {}
</script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <script src="Foundation-Sites-CSS/js/vendor/jquery.js"></script>
    <script src="Foundation-Sites-CSS/js/vendor/foundation.js"></script>
    <script src="Foundation-Sites-CSS/js/vendor/what-input.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="Foundation-Sites-CSS/css/foundation.css">
    <link rel="stylesheet" type="text/css" href="style.css">

    <script src="function/summon/standard_character_skills_block.js"></script>
    <script src="function/summon/standard_characters_block.js"></script>

    <script src="function/button/hide.js"></script>
    <script src="function/button/replace.js"></script>
    <script src="function/button/strength.js"></script>
    <script src="function/button/wave.js"></script>
    
    <script src="function/replace/decompress.js"></script>
    <script src="function/replace/character_name.js"></script>
    <script src="function/replace/skill_name.js"></script>
    <script src="function/replace/term.js"></script>
    <script src="function/replace/card_name.js"></script>

    <script src="function/scroll_back.js"></script>


    <title>Document丨程序</title>
</head>

<body>
    <script>$(document).foundation()</script>
    <header id="header">
        <nav>
            <div id="header_title">
                <button id="menu-toggle" style="background: none; border: none; cursor: pointer;">05 wiki</button>
                <p class="strength_title"></p>
                <script type="text/javascript">
                    document.querySelectorAll('.strength_title').forEach(button => {
                        button.addEventListener(
                            'click', () => {
                                change_strength()
                            }
                        )
                    })
                </script>
            </div>
        </nav>
        <div id="sidebar-menu" style="display: none; position: absolute; top: 50px; padding: 10px; border: 1px solid #ccc; background: #ffffff;">
            <li style="list-style-type: circle;">
                <button id="update-account-button" style="background: none; border: none;">更籍</button>
            </li>
            <li style="list-style-type: circle;">
                <button id="approve-request-button" style="background: none; border: none;">批允</button>
            </li>
            <li style="list-style-type: circle;">
                <button id="logout-button" style="background: none; border: none;">散出</button>
            </li>
        </div>
        <!-- 添加弹窗HTML -->
        <div id="update-account-modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border: 1px solid #ccc; z-index: 1000;">
            <h2>更易版籍</h2>
            <form id="updateForm">
                <input type="text" id="newUsername" name="newUsername" placeholder="新用户名" required>
                <input type="password" id="newPassword" name="newPassword" placeholder="新密码" required>
                <button type="submit" style="padding: 10px;
                background: #8698ff;
                color: white;
                border: none;
                border-radius: 3px;
                cursor: pointer;
                width: 100%;">更新</button>
            </form>
        
            <p id="responseMessage"></p>
        </div>
        <!-- 添加审核请求弹窗HTML -->
        <div id="approve-user-modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border: 1px solid #ccc; z-index: 1000;">
            <h2>呈详</h2>
            <div id="pending-users-modal-content">
                <!-- 动态生成未激活用户列表 -->
            </div>
        </div>
        <script>
            // 控制弹窗显示/隐藏
            document.getElementById('update-account-button').addEventListener('click', function () {
                const updateAccountModal = document.getElementById('update-account-modal')
                updateAccountModal.style.display = updateAccountModal.style.display === 'none' ? 'block' : 'none';
                document.getElementById('newUsername').value = localStorage.getItem('username'); // 填充当前用户名
            });
        
            // 表单提交逻辑
            document.getElementById('updateForm').addEventListener('submit', async (event) => {
                event.preventDefault();
        
                const id = localStorage.getItem('id'); // 假设登录时保存了用户名
                const newUsername = document.getElementById('newUsername').value;
                const newPassword = document.getElementById('newPassword').value;
        
                if (!id) {
                    document.getElementById('responseMessage').textContent = '未检测到登录信息，请重新登录。';
                    document.getElementById('responseMessage').style.color = 'red';
                    return;
                }
        
                try {
                    const response = await fetch('http://localhost:3000/api/update', {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ id, newUsername, newPassword })
                    });
        
                    if (response.ok) {
                        document.getElementById('responseMessage').textContent = '更新成功！';
                        document.getElementById('responseMessage').style.color = 'green';
                        console.log('更新成功');
                    } else {
                        const errorData = await response.json();
                        document.getElementById('responseMessage').textContent = errorData.message;
                        document.getElementById('responseMessage').style.color = 'red';
                        console.error('更新失败');
                    }
                } catch (error) {
                    document.getElementById('responseMessage').textContent = '请求失败，请稍后重试。';
                    document.getElementById('responseMessage').style.color = 'red';
                    console.error('请求失败:', error);
                }
            });
            // 控制审核请求弹窗显示/隐藏
            document.getElementById('approve-request-button').addEventListener('click', function () {
                const approveUserModal = document.getElementById('approve-user-modal');
                approveUserModal.style.display = approveUserModal.style.display === 'none' ? 'block' : 'none';
                renderPendingUsers(); // 渲染未激活用户列表
            });
            // 修改 renderPendingUsers 函数以支持弹窗内容
            async function renderPendingUsers() {
                const users = await fetchPendingUsers();
                const container = document.getElementById('pending-users-modal-content');
                container.innerHTML = '';

                if (users.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: gray;">簿书皆毕</p>';
                    return;
                }

                users.forEach(user => {
                    const userDiv = document.createElement('div');
                    userDiv.style.display = 'flex';
                    userDiv.style.justifyContent = 'space-between';
                    userDiv.style.alignItems = 'center';
                    userDiv.style.marginBottom = '10px';
                    userDiv.style.padding = '10px';
                    userDiv.style.border = '1px solid #ccc';
                    userDiv.style.borderRadius = '5px';
                    userDiv.style.backgroundColor = '#f9f9f9';

                    userDiv.innerHTML = `
                        <p style="margin: 0; font-weight: bold;">注册: ${user.username}</p>
                        <div>
                            <button onclick="handleUserApproval('${user._id}', 'approve')" style="margin-right: 5px; padding: 5px 10px; background-color: #4CAF50; color: white; border: none; border-radius: 3px; cursor: pointer;">允准</button>
                            <button onclick="handleUserApproval('${user._id}', 'reject')" style="padding: 5px 10px; background-color: #f44336; color: white; border: none; border-radius: 3px; cursor: pointer;">不准</button>
                        </div>
                    `;
                    container.appendChild(userDiv);
                });
            }
            // 示例：获取未激活用户列表
            async function fetchPendingUsers() {
                try {
                    const response = await fetch('http://localhost:3000/api/pending-users');
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const data = await response.json();
                    return data; // 返回未激活用户列表
                } catch (error) {
                    console.error('获取未激活用户失败:', error.message);
                    return []; // 返回空数组以避免后续报错
                }
            }
            // 示例：批准或退回用户
            async function handleUserApproval(userId, action) {
                try {
                    const response = await fetch('http://localhost:3000/api/approve', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ userId, action })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    console.log(data.message); // 显示操作结果

                    // 操作成功后刷新待批准用户列表
                    await renderPendingUsers();
                } catch (error) {
                    console.error('操作失败:', error.message);
                }
            }
        </script>
        
        <script>
            // 控制侧边栏显示/隐藏
            document.getElementById('menu-toggle').addEventListener('click', function () {
                const sidebarMenu = document.getElementById('sidebar-menu');
                sidebarMenu.style.display = sidebarMenu.style.display === 'none' ? 'block' : 'none';
            });
        
            // 退出登录功能
            document.getElementById('logout-button').addEventListener('click', function () {
                localStorage.removeItem('token'); // 清除登录令牌
                window.location.href = 'login.html'; // 跳转到登录页面
            });
        </script>
        <nav id="sidebar">
            <ul class="tabs nav" data-tabs id="example-tabs">
                <li id="nav-item" class="tabs-title is-active"><a id='title-a' class='title-a' href="#panel_term" aria-selected="true" onclick="changeTitle(0)">程序</a></li>
                <li id="nav-item" class="tabs-title"><a id='title-a' class='title-a' href="#panel_skill" onclick="changeTitle(1)">技能</a></li>
                <li id="nav-item" class="tabs-title"><a id='title-a' class='title-a' href="#panel_card" onclick="changeTitle(2)">牌库</a></li>
                <li id="nav-item" class="tabs-title"><a id='title-a' class='title-a' href="#panel_character" onclick="changeTitle(3)">将池</a></li>
                <li id="nav-item" class="tabs-title"><a id='title-a' class='title-a' href="#panel_draft" onclick="changeTitle(4)">草稿</a></li>
                <script>
                    function changeTitle(n) {
                        title_name = ['程序','技能','牌库','将池','草稿']
                        document.title = "Document丨" + title_name[n]
                    }
                </script>
            </ul>
        </nav>
    </header>
    <div class="row">
        <div class="columns">
            <div class="tabs-content" data-tabs-content="example-tabs" id="termContainer">
                <div class="tabs-panel is-active" id="panel_term">
                    <div class="main">
                        <main>
                            <padding>
                                <padding>
                                    <h1><procedure class="scroll" /></h1>
                                    <padding>
                                        <h2><if class="scroll"><ifHead></ifHead>……</if></h2>
                                        <div class="indent">
                                            声明条件。
                                        </div>
                                        <h2>
                                            <a class="button button_equaling"></a>
                                            <script type="text/javascript">
                                                document.querySelectorAll('.button_equaling').forEach(button => {
                                                    button.addEventListener(
                                                        'click', (event) => elementReplaceCheck('equaling', 'equalingHead', event)
                                                    )
                                                })
                                            </script>
                                            <equaling class="scroll"><equalingHead0></equalingHead0>……</equaling>
                                        </h2>
                                        <div class="indent">
                                            声明公式。
                                        </div>
                                        <h2><counts class="scroll">……<countsEnd></countsEnd></counts></h2>
                                        <div class="indent">
                                            计数。
                                        </div>
                                        <h2><every class="scroll"><everyHead></everyHead>……</every></h2>
                                        <div class="indent">
                                            遍历。
                                        </div>
                                        <h2><this class="scroll"><thisHead></thisHead>……</this></h2>
                                        <div class="indent">
                                            <or>指向传递的<object></object><orBody></orBody>表示所在的</or>。
                                        </div>
                                        <h2><current class="scroll"><currentHead></currentHead>……</current></h2>
                                        <div class="indent">
                                            指向当前的。
                                        </div>
                                        <h2><except class="scroll"><exceptHead />……</except></h2>
                                        <div class="indent">
                                            前块异常时执行。
                                        </div>
                                        <h2>比较</h2>
                                        <padding>
                                            <h3><greater class="scroll"><greaterHead></greaterHead>……</greater></h3>
                                            <padding>
                                                <h3><more class="scroll"><moreHead></moreHead>……</more></h3>
                                                <div class="indent">
                                                    数量<greaterC></greaterC>。
                                                </div>
                                            </padding>
                                            <h3><less class="scroll"><lessHead></lessHead>……</less></h3>
                                            <padding>
                                                <h3><fewer class="scroll"><fewerHead></fewerHead>……</fewer></h3>
                                                <div class="indent">
                                                    数量<lessC></lessC>。
                                                </div>
                                            </padding>
                                            <h3><max class="scroll"><maxHead /></max></h3>
                                            <div class="indent">
                                                不存在更大者。
                                            </div>
                                            <padding>
                                                <h3><theMax class="scroll"><theMaxHead /></theMax></h3>
                                                <div class="indent">
                                                    不存在更大或相等者。
                                                </div>
                                            </padding>
                                            <h3><min class="scroll"><minHead /></min></h3>
                                            <div class="indent">
                                                不存在更小者。
                                            </div>
                                            <padding>
                                                <h3><theMin class="scroll"><theMinHead /></theMin></h3>
                                                <div class="indent">
                                                    不存在更小或相等者。
                                                </div>
                                            </padding>
                                            <h3><most class="scroll"><mostHead /></most></h3>
                                            <div class="indent">
                                                不存在更多者。
                                            </div>
                                            <padding>
                                                <h3><theMost class="scroll"><theMostHead /></theMost></h3>
                                                <div class="indent">
                                                    不存在更多或数量相等者。
                                                </div>
                                            </padding>
                                            <h3><least class="scroll"><leastHead /></least></h3>
                                            <div class="indent">
                                                不存在更少者。
                                            </div>
                                            <padding>
                                                <h3><theLeast class="scroll"><theLeastHead /></theLeast></h3>
                                                <div class="indent">
                                                    不存在更少或数量相等者。
                                                </div>
                                            </padding>
                                        </padding>
                                        <h2><anyNumber class="scroll" /></h2>
                                        <div class="indent">
                                            不限数量。
                                        </div>
                                        <h2>
                                            <a class="button button_roundUp"></a>
                                            <script type="text/javascript">
                                                document.querySelectorAll('.button_roundUp').forEach(button => {
                                                    button.addEventListener(
                                                        'click', (event) => elementReplaceCheck('roundUp', 'roundUp', event)
                                                    )
                                                })
                                            </script>
                                            <roundUp class="scroll"><roundUp0></roundUp0></roundUp>
                                        </h2>
                                        <div class="indent">
                                            向上取整。
                                        </div>
                                        <h2>
                                            <a class="button button_pronoun"></a>
                                            <script type="text/javascript">
                                                document.querySelectorAll('.button_pronoun').forEach(button => {
                                                    button.addEventListener(
                                                        'click', (event) => pronounReplaceCheck(event)
                                                    )
                                                })
                                            </script>
                                            代词<pronoun1 class="scroll"></pronoun1><pronoun2 class="scroll"></pronoun2><pronoun3 class="scroll"></pronoun3>
                                        </h2>
                                        <padding>
                                            <h3><self class="scroll" /></h3>
                                        </padding>
                                        <h2>
                                            <a class="button button_include"></a>
                                            <script type="text/javascript">
                                                document.querySelectorAll('.button_include').forEach(button => {
                                                    button.addEventListener(
                                                        'click', (event) => elementReplaceCheck('include', 'include', event)
                                                    )
                                                })
                                            </script>
                                            <include class="scroll"><include0></include0>……</include>
                                        </h2>
                                        <div class="indent">
                                            <or>属<orBody></orBody>包含</or>。
                                        </div>
                                        <h2><procedureTrigger class="scroll" /></h2>
                                        <div class="indent">
                                            一种数据结构。用于执行<procedure></procedure>。
                                        </div>
                                        <div class="indent">
                                            覆盖时，以输入的<procedureTrigger></procedureTrigger>中的每项非空<attribute></attribute>覆盖原<procedureTrigger></procedureTrigger>中的对应<attribute></attribute>。
                                        </div>
                                        <div class="indent">
                                            包含以下数据：
                                        </div>
                                        <padding>
                                            <h3><tickingTimeLimit class="scroll" /></h3>
                                                <div class="indent">
                                                    一种<ticking></ticking>。
                                                </div>
                                                <div class="indent">
                                                    包含以下数据：
                                                </div>
                                                <padding>
                                                    <h3><tickingLimit class="scroll" /></h3>
                                                        <div class="indent">
                                                            一种<ticking></ticking>。
                                                        </div>
                                                        <div class="indent">
                                                            如果可能，限制为<you></you>的。
                                                        </div>
                                                        <div class="indent">
                                                            满足<tickingLimit></tickingLimit>，即存在正在<advance></advance>的<ticking></ticking>符合<tickingLimit></tickingLimit>。
                                                        </div>
                                                        <h3><numberLimit class="scroll" /></h3>
                                                            <div class="indent">
                                                                一项<attribute></attribute>。整型变量。
                                                            </div>
                                                            <div class="indent">
                                                                满足<numberLimit></numberLimit>，即<coordination>存在正在<advance></advance>的<ticking></ticking>符合<thisC><tickingTimeLimit></tickingTimeLimit></thisC>的<tickingLimit></tickingLimit>，<stativeCoordination></stativeCoordination><inTicking>该<ticking></ticking><inEnd></inEnd></inTicking><currentC><procedure></procedure></currentC>的执行次数<lessC><procedure></procedure>的<numberLimit></numberLimit></lessC></coordination>。
                                                            </div>
                                                            <padding>
                                                                <h3><numberLimiting class="scroll"><numberLimitingHead></numberLimitingHead>……<numberLimitingEnd /></numberLimitingHead></h3>
                                                                    <div class="indent">
                                                                        输入<numberLimit></numberLimit>。
                                                                    </div>
                                                            </padding>
                                                </padding>
                                                <h3><tickLimit class="scroll" /></h3>
                                                    <div class="indent">
                                                        一种<tick></tick>。
                                                    </div>
                                                    <div class="indent">
                                                        满足<tickLimit></tickLimit>，即<currentTick></currentTick>符合<tickLimit></tickLimit>。
                                                    </div>
                                                    <div class="indent">
                                                        未规定<tickLimit></tickLimit>的<procedureTrigger></procedureTrigger>，<ifC>其对应的<tickingLimit></tickingLimit>为：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                <preparingStage></preparingStage>，<ifBody></ifBody>其的<tickLimit></tickLimit>值视为<preparing></preparing>。
                                                            </div>
                                                            <div class="indent">
                                                                <actingStage></actingStage>，<ifBody></ifBody>其的<tickLimit></tickLimit>值视为<acting></acting>。</ifC>
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <a class="button button_tickQuantifier"></a>
                                                        <script type="text/javascript">
                                                            document.querySelectorAll('.button_tickQuantifier').forEach(button => {
                                                                button.addEventListener(
                                                                    'click', (event) => elementHideCheck('tickQuantifier', event)
                                                                )
                                                            })
                                                        </script>
                                                        <tickLimit></tickLimit>中存在量词时，<ifC><coordination>对应<object></object>可能不唯一<stativeCoordination></stativeCoordination>不为全称量词</coordination>，则对<every><tickQuantifier><everyHead></everyHead>个</tickQuantifier><object></object></every><eachC>触发一次</eachC>，<else></else>，量词可省略</ifC>。
                                                    </div>
                                                    <padding>
                                                        <h3><when class="scroll"><whenHead></whenHead>……</when></h3>
                                                        <div class="indent">
                                                            输入<tick></tick>。
                                                        </div>
                                                    </padding>
                                        </padding>
                                        <h2><command class="scroll" /></h2>
                                        <div class="indent">
                                            有<procedureTrigger></procedureTrigger>的<procedure></procedure>。
                                        </div>
                                        <h2><status class="scroll" /></h2>
                                        <div class="indent">
                                            没有<procedureTrigger></procedureTrigger>的<procedure></procedure>。
                                        </div>
                                        <padding>
                                            <h3><deemAs class="scroll" /></h3>
                                            <div class="indent">
                                                以<status></status>修改<attribute></attribute>。
                                            </div>
                                        </padding>
                                        <h2><each class="scroll"><eachHead></eachHead><<procedure></procedure>></each></h2>
                                        <div class="indent">
                                            表示<procedure></procedure>可以被输入重复的执行者。
                                        </div>
                                        <h2><priority class="scroll" /></h2>
                                        <div class="indent">
                                            <characterSkill></characterSkill>><equipmentSkill></equipmentSkill>><card></card>>其他，<ifC>同级<ifBody></ifBody>按照从<or><living></living>的<currentTurnRole></currentTurnRole><orBody></orBody><dead></dead>的<currentTurnRole></currentTurnRole>的<nextSeat><nextSeatHead></nextSeatHead><seatEnd></seatEnd></nextSeat></or>开始的<seatOrder></seatOrder>顺序</ifC>。
                                        </div>
                                        <h2><you class="scroll" /></h2>
                                        <div class="indent">
                                            执行<procedure></procedure>的<role></role>。
                                        </div>
                                        <padding>
                                            <h3><elseRole class="scroll" /></h3>
                                            <div class="indent">
                                                不为<you></you>的<roleDefault></roleDefault>。
                                            </div>
                                            <h3><make class="scroll"><makeHead></makeHead>……</make></h3>
                                            <div class="indent">
                                                输入执行<procedure></procedure>的<role></role>。执行新的<procedure></procedure>。
                                            </div>
                                        </padding>
                                    </padding>
                                    <h1><process class="scroll" /></h1>
                                    <padding>
                                        <h2><game class="scroll" /></h2>
                                        <div class="indent">
                                            一种<process></process>。可简称为<game epithet="1"></game>。
                                        </div>
                                        <div class="indent">
                                            包含以下<procedure></procedure>：
                                        </div>
                                        <padding>
                                            <div class="h">
                                                <div class="indent">
                                                    <advance></advance><tick></tick>“<atGameStart class="scroll bold"></atGameStart>”。
                                                </div>
                                                <div class="indent">
                                                    循环<advance></advance><round></round>。
                                                </div>
                                            </div>
                                        </padding>
                                        <h2><round class="scroll" /></h2>
                                        <div class="indent">
                                            一种<process></process>。可简称为<round epithet="1"></round>。
                                        </div>
                                        <div class="indent">
                                            包含以下<procedure></procedure>：
                                        </div>
                                        <padding>
                                            <div class="h">
                                                <div class="indent">
                                                    <advance></advance><tick></tick>“<atRoundStart class="scroll bold"></atRoundStart>”。
                                                </div>
                                                <div class="indent">
                                                    <makeC>所有<roleDefault></roleDefault><advance></advance><turnProcess epithet="1"></turnProcess></makeC>。
                                                </div>
                                                <div class="indent">
                                                    <advance></advance><tick></tick>“<atRoundFinish class="scroll bold"> </atRoundFinish>”。
                                                </div>
                                            </div>
                                        </padding>
                                        <padding>
                                            <h3><rounds class="scroll" /></h3>
                                            <div class="indent">
                                                <round></round>的循环次数。
                                            </div>
                                        </padding>
                                        <h2><turnProcess epithet="1" class="scroll" /></h2>
                                        <div class="indent">
                                            一种<process></process>。可简称为<turnProcess></turnProcess>。
                                        </div>
                                        <div class="indent">
                                            包含以下<procedure></procedure>：
                                        </div>
                                        <padding>
                                            <div class="h">
                                                <div class="indent">
                                                    <advance></advance><tick></tick>“<beforeTurnStart class="scroll bold"></beforeTurnStart>”。
                                                </div>
                                                <div class="indent">
                                                    <advance></advance><turn epithet="1"></turn>。
                                                </div>
                                                <div class="indent">
                                                    <advance></advance><tick></tick>“<afterTurnFinish class="scroll bold"></afterTurnFinish>”。
                                                </div>
                                            </div>
                                        </padding>
                                        <h2><stageProcess class="scroll" /></h2>
                                        <div class="indent">
                                            一类<process></process>。可简称为<stageProcess epithet="1"></stageProcess>。
                                        </div>
                                        <div class="indent">
                                            包含以下<process></process>：
                                        </div>
                                        <padding>
                                            <h3><preparingStageProcess class="scroll" /></h3>
                                            <div class="indent">
                                                <advance></advance><tick></tick>“<beforePreparingStageStart class="scroll bold"></beforePreparingStageStart>”。
                                            </div>
                                            <div class="indent">
                                                <advance></advance><preparingStage></preparingStage>。
                                            </div>
                                            <div class="indent">
                                                <advance></advance><tick></tick>“<afterPreparingStageFinish class="scroll bold"></afterPreparingStageFinish>”。
                                            </div>
                                            <h3><dealingStageProcess class="scroll" /></h3>
                                            <h3><gettingStageProcess class="scroll" /></h3>
                                            <h3><actingStageProcess class="scroll" /></h3>
                                            <div class="indent">
                                                <advance></advance><tick></tick>“<beforeActingStageStart class="scroll bold"></beforeActingStageStart>”。
                                            </div>
                                            <div class="indent">
                                                <advance></advance><actingStage></actingStage>。
                                            </div>
                                            <div class="indent">
                                                <advance></advance><tick></tick>“<afterActingStageFinish class="scroll bold"></afterActingStageFinish>”。
                                            </div>
                                            <h3><throwingStageProcess class="scroll" /></h3>
                                            <h3><concludingStageProcess class="scroll" /></h3>
                                        </padding>
                                        <h2><event class="scroll" /></h2>
                                        <div class="indent">
                                            一类<process></process>。
                                        </div>
                                        <padding>
                                            <h3><choose class="scroll"><chooseBody /></choose></h3>
                                            <div class="indent">
                                                一类<event></event>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><choose><chooseRole class="scroll" /></choose></h3>
                                                <div class="indent">
                                                    一名<roleDefault></roleDefault>。
                                                </div>
                                                <h3><choose><targetNumberLimit class="scroll" /></choose></h3>
                                                <div class="indent">
                                                    可能不存在。
                                                </div>
                                                <h3><choose><targetLimit class="scroll" /></choose></h3>
                                                <div class="indent">
                                                    <object></object>的集合。
                                                </div>
                                                <div class="indent">
                                                    <ifC>不在<procedureTrigger></procedureTrigger>内，<ifBody></ifBody>对每个元素，如果可能，限制为<procedure></procedure>执行<role></role>的</ifC>。
                                                </div>
                                                <h3><choose><distanceLimit class="scroll" /></choose></h3>
                                                <div class="indent">
                                                    可能不存在。
                                                </div>
                                            </padding>
                                            <h3><affect class="scroll"><affectEnd /></affect></h3>
                                            <div class="indent">
                                                一类<event></event>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><affect><affectRole class="scroll" /></affect></h3>
                                                <div class="indent">
                                                    可能不存在。
                                                </div>
                                                <h3><affect><affectedRole class="scroll" /></affect></h3>
                                                <div class="indent">
                                                    不包含<dead></dead><role></role>。非空。
                                                </div>
                                                <h3><affect><effect class="scroll" /></affect></h3>
                                                <div class="indent">
                                                    至少一段<procedure></procedure>。
                                                </div>
                                            </padding>
                                            <div class="indent">
                                                包含以下<procedure></procedure>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeAffect class="scroll bold"></beforeAffect>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenAffect class="scroll bold"></whenAffect>”
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                依次执行<affect><effect></effect></affect>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterAffect class="scroll bold"></afterAffect>”。
                                                    </div>
                                                </div>
                                            </padding>
                                            <h3><offset class="scroll"><offsetEnd /></offset></h3>
                                            <div class="indent">
                                                一类<event></event>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><offset><offsetTarget class="scroll" /></offset></h3>
                                            </padding>
                                            <div class="indent">
                                                包含以下<procedure></procedure>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeOffset class="scroll bold"></beforeOffset>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenOffset class="scroll bold"></whenOffset>”
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                将<offset><offsetTarget></offsetTarget></offset>从<affect><effect></effect></affect>中移除。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterOffset class="scroll bold"></afterOffset>”。
                                                    </div>
                                                </div>
                                            </padding>
                                            <h3><move class="scroll"><moveBody0 /></move></h3>
                                            <div class="indent">
                                                一类<event></event>。可称为<move><moveBody1></moveBody1></move>或<move><placeBody></placeBody></move>。
                                            </div>
                                            <div class="indent">
                                                <ifC><move><movedCard></movedCard></move><outArea><inHead></inHead><move><movedInArea></movedInArea></move><outAreaEnd></outAreaEnd></outArea>，<ifBody></ifBody>可称为<or><move><moveBody2></moveBody2></move><orBody></orBody><move><moveBody4></moveBody4></move></or></ifC>。
                                            </div>
                                            <div class="indent">
                                                <ifC><coordination><move><movedCard></movedCard></move><outArea><inHead></inHead><move><movedInArea></movedInArea></move><outAreaEnd></outAreaEnd></outArea>，<stativeCoordination></stativeCoordination><move><movedInArea></movedInArea></move>为一名<role></role>的<HandCard></HandCard></coordination>，<ifBody></ifBody>可称为<move><moveBody5></moveBody5></move></ifC>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><move><moveRole class="scroll" /></move></h3>
                                                <div class="indent">
                                                    一名<role></role>。可能不存在。
                                                </div>
                                                <h3><move><movedCard class="scroll" /></move></h3>
                                                <div class="indent">
                                                    <anyNumber></anyNumber>张<card></card>的集合。
                                                </div>
                                                <h3><move><movedInArea class="scroll" /></move></h3>
                                                <div class="indent">
                                                    一个<area></area>。<ifC><move><movedAtPosition></movedAtPosition></move>与原<position></position>相同，<ifBody></ifBody>不与原<lyingArea epithet="1"></lyingArea>相同</ifC>。
                                                </div>
                                                <h3><move><movedAtPosition class="scroll" /></move></h3>
                                                <div class="indent">
                                                    一个正整数。默认为1。<ifC><move><movedInArea></movedInArea></move>与原<lyingArea epithet="1"></lyingArea>相同，<ifBody></ifBody>不与原<position></position>相同</ifC>。
                                                </div>
                                            </padding>
                                            <div class="indent">
                                                包含以下<procedure></procedure>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <ifC>存在<move><moveRole></moveRole></move>，<ifBody></ifBody><advance></advance><tick></tick>“<beforePlace class="scroll bold"><placeBody></placeBody><beforeEnd></beforeEnd></beforePlace>”</ifC>。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforePlaced class="scroll bold"><passive></passive><placeBody></placeBody><beforeEnd></beforeEnd></beforePlaced>”。
                                                    </div>
                                                    <div class="indent">
                                                        <ifC>存在<move><moveRole></moveRole></move>，<ifBody></ifBody><advance></advance><tick></tick>“<whenPlace class="scroll bold"><placeBody></placeBody><whenEnd></whenEnd></whenPlace>”</ifC>。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenPlaced class="scroll bold"><passive></passive><placeBody></placeBody><whenEnd></whenEnd></whenPlaced>”：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                <move><movedInArea></movedInArea></move>所有<card></card>的<position></position>+<formula class="irreplaceable"><counts><move><movedCard></movedCard></move><countsEnd></countsEnd></counts></formula>。
                                                            </div>
                                                            <div class="indent">
                                                                <move><moveRole></moveRole></move>将<every><everyHead></everyHead>张<placedCard><placedCardHead></placedCardHead><placedCardEnd></placedCardEnd></placedCard></every>的<lyingArea></lyingArea>改为<placedArea><placedAreaHead1></placedAreaHead1><placedAreaEnd></placedAreaEnd></placedArea>，<position></position>改为<formula class="irreplaceable"><placedPosition><placedPositionHead></placedPositionHead><placedPositionEnd></placedPositionEnd></placedPosition>+序数-1</formula>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <ifC>存在<move><moveRole></moveRole></move>，<ifBody></ifBody><advance></advance><tick></tick>“<afterPlace class="scroll bold"><placeBody></placeBody><afterEnd></afterEnd></afterPlace>”</ifC>。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterPlaced class="scroll bold"><passive></passive><placeBody></placeBody><afterEnd></afterEnd></afterPlaced>”。
                                                    </div>
                                                </div>
                                            </padding>
                                            <h3><face class="scroll"><faceBody /></face></h3>
                                            <div class="indent">
                                                一类<event></event>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><face><faceRole class="scroll" /></face></h3>
                                                <div class="indent">
                                                    一名<role></role>。可能不存在。
                                                </div>
                                                <h3><face><facedCard class="scroll" /></face></h3>
                                                <div class="indent">
                                                    <anyNumber></anyNumber>张<card></card>的集合。
                                                </div>
                                            </padding>
                                            <div class="indent">
                                                包含以下<procedure></procedure>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeFace class="scroll bold"><faceBody></faceBody><beforeEnd></beforeEnd></beforeFace>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeFaced class="scroll bold"><passive></passive><faceBody></faceBody><beforeEnd></beforeEnd></beforeFaced>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenFace class="scroll bold"><faceBody></faceBody><whenEnd></whenEnd></whenFace>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenFaced class="scroll bold"><passive></passive><faceBody></faceBody><whenEnd></whenEnd></whenFaced>”：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                将<face><facedCard></facedCard></face>的<forOrAgainst></forOrAgainst>改为<for></for>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterFace class="scroll bold"><faceBody></faceBody><afterEnd></afterEnd></afterFace>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterFaced class="scroll bold"><passive></passive><faceBody></faceBody><afterEnd></afterEnd></afterFaced>”。
                                                    </div>
                                                </div>
                                            </padding>
                                            <h3><back class="scroll"><backBody /></back></h3>
                                            <div class="indent">
                                                一类<event></event>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><back><backRole class="scroll" /></back></h3>
                                                <div class="indent">
                                                    一名<role></role>。可能不存在。
                                                </div>
                                                <h3><back><backedCard class="scroll" /></back></h3>
                                                <div class="indent">
                                                    <anyNumber></anyNumber>张<card></card>的集合。
                                                </div>
                                            </padding>
                                            <div class="indent">
                                                包含以下<procedure></procedure>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeBack class="scroll bold"><backBody></backBody><beforeEnd></beforeEnd></beforeBack>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeBacked class="scroll bold"><passive></passive><backBody></backBody><beforeEnd></beforeEnd></beforeBacked>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenBack class="scroll bold"><backBody></backBody><whenEnd></whenEnd></whenBack>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenBacked class="scroll bold"><passive></passive><backBody></backBody><whenEnd></whenEnd></whenBacked>”：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                将<back><backedCard></backedCard></back>的<forOrAgainst></forOrAgainst>改为<against></against>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterBack class="scroll bold"><backBody></backBody><afterEnd></afterEnd></afterBack>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterBacked class="scroll bold"><passive></passive><backBody></backBody><afterEnd></afterEnd></afterBacked>”。
                                                    </div>
                                                </div>
                                            </padding>
                                            <h3><discard class="scroll"><discardBody></discardBody></discard></h3>
                                            <div class="indent">
                                                一类<event></event>。可简称为<discard><discardBody2></discardBody2></discard>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><discard><discardRole class="scroll" /></discard></h3>
                                                <div class="indent">
                                                    一名<role></role>。可能不存在。
                                                </div>
                                                <h3><discard><discardedCard class="scroll" /></discard></h3>
                                                <div class="indent">
                                                    <anyNumber></anyNumber>张<card></card>的集合。
                                                </div>
                                            </padding>
                                            <div class="indent">
                                                包含以下<procedure></procedure>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <ifC>存在<discard><discardRole></discardRole></discard>，<ifBody></ifBody><advance></advance><tick></tick>“<beforeDiscard class="scroll bold"><discardBody></discardBody><beforeEnd></beforeEnd></beforeDiscard>”</ifC>。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeDiscarded class="scroll bold"><passive></passive><discardBody></discardBody><beforeEnd></beforeEnd></beforeDiscarded>”。
                                                    </div>
                                                    <div class="indent">
                                                        <ifC>存在<discard><discardRole></discardRole></discard>，<ifBody></ifBody><advance></advance><tick></tick>“<whenDiscard class="scroll bold"><discardBody></discardBody><whenEnd></whenEnd></whenDiscard>”</ifC>。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenDiscarded class="scroll bold"><passive></passive><discardBody></discardBody><whenEnd></whenEnd></whenDiscarded>”：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                <move><moveRole class="irreplaceable"><discard><discardRole></discardRole></discard></moveRole>将<movedCard class="irreplaceable"><discard><discardedCard></discardedCard></discard></movedCard><moveBody4></moveBody4><movedInArea class="irreplaceable"><discardPile></discardPile></movedInArea></move>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <ifC>存在<discard><discardRole></discardRole></discard>，<ifBody></ifBody><advance></advance><tick></tick>“<afterDiscard class="scroll bold"><discardBody></discardBody><afterEnd></afterEnd></afterDiscard>”</ifC>。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterDiscarded class="scroll bold"><passive></passive><discardBody></discardBody><afterEnd></afterEnd></afterDiscarded>”。
                                                    </div>
                                                </div>
                                            </padding>
                                            <h3><draw class="scroll"><drawHead></drawHead><drawEnd></drawEnd></draw></h3>
                                            <div class="indent">
                                                一类<event></event>。可简称为<draw><drawHead></drawHead></draw>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><draw><drawer class="scroll" /></draw></h3>
                                                <div class="indent">
                                                    一名<roleDefault></roleDefault>。
                                                </div>
                                                <h3><draw><drawQuantity class="scroll" /></draw></h3>
                                                <div class="indent">
                                                    一个正整数。
                                                </div>
                                            </padding>
                                            <div class="indent">
                                                包含以下<procedure></procedure>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeDraw class="scroll bold"></beforeDraw>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenDraw class="scroll bold"></whenDraw>”：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                <move><moveRole class="irreplaceable"><draw><drawer></drawer></draw></moveRole><moveBody5></moveBody5><movedCard class="irreplaceable"><pile></pile>前<equalingC><drawQuantity></drawQuantity></equalingC>张<card></card></movedCard></move>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterDraw class="scroll bold"></afterDraw>”。
                                                    </div>
                                                </div>
                                            </padding>
                                            <h3><use class="scroll"><useBody /></use></h3>
                                            <div class="indent">
                                                一类<event></event>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><use><user class="scroll" /></use></h3>
                                                <div class="indent">
                                                    一名<role></role>。
                                                </div>
                                                <h3><use><useTarget class="scroll" /></use></h3>
                                                <div class="indent">
                                                    不包含<dead></dead><role></role>。非空。
                                                </div>
                                                <h3><use><usedPhysicalCard class="scroll" /></use></h3>
                                                <div class="indent">
                                                    <anyNumber></anyNumber>张<baseCard></baseCard>。
                                                </div>
                                                <h3><use><usedCard class="scroll" /></use></h3>
                                                <div class="indent">
                                                    <card></card>的属性。
                                                </div>
                                            </padding>
                                            <div class="indent">
                                                包含以下<procedure></procedure>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeUse class="scroll bold"><useBody></useBody><beforeEnd></beforeEnd></beforeUse>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeUsed class="scroll bold"><passive></passive><useBody></useBody><beforeEnd></beforeEnd></beforeUsed>”：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                <move>将<movedCard class="irreplaceable"><use><usedPhysicalCard></usedPhysicalCard></use></movedCard><placeBody></placeBody><movedInArea class="irreplaceable"><top><treatmentArea></treatmentArea><topEnd></topEnd></top></movedInArea></move>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenUse class="scroll bold"><useBody></useBody><whenEnd></whenEnd></whenUse>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenUsed class="scroll bold"><passive></passive><useBody></useBody><whenEnd></whenEnd></whenUsed>”：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                <affect><affectedRole class="irreplaceable"><use><usedCard></usedCard></use></affectedRole><affectEnd></affectEnd></affect>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterUse class="scroll bold"><useBody></useBody><afterEnd></afterEnd></afterUse>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterUsed class="scroll bold"><passive></passive><useBody></useBody><afterEnd></afterEnd></afterUsed>”：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                <move>将<movedCard class="irreplaceable"><use><usedPhysicalCard></usedPhysicalCard></use></movedCard><moveBody4></moveBody4><movedInArea class="irreplaceable"><discardPile></discardPile></movedInArea></move>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                </div>
                                            </padding>
                                            <h3><play class="scroll"><playBody /></play></h3>
                                            <div class="indent">
                                                一类<event></event>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><play><player class="scroll" /></play></h3>
                                                <div class="indent">
                                                    一名<role></role>。
                                                </div>
                                                <h3><play><playTarget class="scroll" /></play></h3>
                                                <div class="indent">
                                                    不包含<dead></dead><role></role>。非空。
                                                </div>
                                                <h3><play><playedPhysicalCard class="scroll" /></play></h3>
                                                <div class="indent">
                                                    <anyNumber></anyNumber>张<baseCard></baseCard>。
                                                </div>
                                                <h3><play><playedCard class="scroll" /></play></h3>
                                                <div class="indent">
                                                    <card></card>的属性。
                                                </div>
                                                <h3><play><playEffect class="scroll" /></play></h3>
                                                <div class="indent">
                                                    至少一段<procedure></procedure>。
                                                </div>
                                            </padding>
                                            <div class="indent">
                                                包含以下<procedure></procedure>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforePlay class="scroll bold"><playBody></playBody><beforeEnd></beforeEnd></beforePlay>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforePlayed class="scroll bold"><passive></passive><playBody></playBody><beforeEnd></beforeEnd></beforePlayed>”：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                <move>将<movedCard class="irreplaceable"><play><playedPhysicalCard></playedPhysicalCard></play></movedCard><placeBody></placeBody><movedInArea class="irreplaceable"><top><treatmentArea></treatmentArea><topEnd></topEnd></top></movedInArea></move>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenPlay class="scroll bold"><playBody></playBody><whenEnd></whenEnd></whenPlay>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenPlayed class="scroll bold"><passive></passive><playBody></playBody><whenEnd></whenEnd></whenPlayed>”：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                <affect><affectedRole class="irreplaceable"><play><playedCard></playedCard></play></affectedRole><affectEnd></affectEnd></affect>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterPlay class="scroll bold"><playBody></playBody><afterEnd></afterEnd></afterPlay>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterPlayed class="scroll bold"><passive></passive><playBody></playBody><afterEnd></afterEnd></afterPlayed>”：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                <move>将<movedCard class="irreplaceable"><play><playedPhysicalCard></playedPhysicalCard></play></movedCard><moveBody4></moveBody4><movedInArea class="irreplaceable"><discardPile></discardPile></movedInArea></move>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                </div>
                                            </padding><h3><comparison class="scroll"><comparisonEnd /></comparison></h3>
                                            <div class="indent">
                                                一类<event></event>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><comparison><comparisonInitiator class="scroll" /></comparison></h3>
                                                <div class="indent">
                                                    一名<roleDefault></roleDefault>。传入时有<handCard></handCard>。
                                                </div>
                                                <h3><comparison><comparisonTarget class="scroll" /></comparison></h3>
                                                <div class="indent">
                                                    <anyNumber></anyNumber>名非<comparison><comparisonInitiator></comparisonInitiator></comparison>的<role></role>。传入时有<handCard></handCard>。
                                                </div>
                                                <h3><comparison><comparisonEffect class="scroll" /></comparison></h3>
                                                <div class="indent">
                                                    任意段<procedure></procedure>。
                                                </div>
                                            </padding>
                                            <div class="indent">
                                                包含以下<procedure></procedure>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeComparison class="scroll bold"></beforeComparison>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenComparison class="scroll bold"></whenComparison>”。
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                <move><moveRole class="irreplaceable"><compareRole></compareRole></moveRole><eachC>将<choose><target1zC></target1zC><targetLimit class="irreplaceable"><handCard></handCard></targetLimit></choose><back><backBody1></backBody1></back><moveBody4></moveBody4><movedInArea class="irreplaceable"><treatmentArea></treatmentArea></movedInArea></eachC></move>。然后<face><faceBody></faceBody><facedCard class="irreplaceable">各自的<move><movedCard class="irreplaceable"><moveBody4></moveBody4><card></card></movedCard></move></facedCard></face>。然后执行<comparison><comparisonEffect></comparisonEffect></comparison>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterComparison class="scroll bold"></afterComparison>”。
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                <move><moveRole class="irreplaceable"><compareRole></compareRole></moveRole>将<movedCard class="irreplaceable">各自的<comparedCard></comparedCard></movedCard><moveBody4></moveBody4><movedInArea class="irreplaceable"><discardPile></discardPile></movedInArea></move>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                </div>
                                                <h3><comparedCard class="scroll" /></h3>
                                                <div class="indent">
                                                    <whenComparison></whenComparison>的<choose><passive></passive><chooseBody></chooseBody></choose><card></card>。
                                                </div>
                                                <padding>
                                                    <h3><winComparison class="scroll" /></h3>
                                                    <div class="indent">
                                                        <comparedCard></comparedCard>的<point></point><theMaxC></theMaxC>。
                                                    </div>
                                                    <h3><loseComparison class="scroll" /></h3>
                                                    <div class="indent">
                                                        <comparedCard></comparedCard>的<point></point>不为<maxC></maxC>。
                                                    </div>
                                                </padding>
                                                <h3><compareRole class="scroll" /></h3>
                                                <div class="indent">
                                                    <comparison><comparisonEnd></comparisonEnd></comparison>的<actionType><comparison><comparisonInitiator></comparisonInitiator></comparison><reciprocalMark></reciprocalMark><comparison><comparisonTarget></comparisonTarget></comparison></actionType>。
                                                </div>
                                                <padding>
                                                    <h3><winComparisonRole class="scroll" /></h3>
                                                    <div class="indent">
                                                        <winComparison></winComparison>的<compareRole></compareRole>。
                                                    </div>
                                                    <padding>
                                                        <h3><winComparisonPoint class="scroll" /></h3>
                                                        <div class="indent">
                                                            <winComparisonRole></winComparisonRole><comparedCard></comparedCard>的<point></point>。
                                                        </div>
                                                    </padding>
                                                    <h3><loseComparisonRole class="scroll" /></h3>
                                                    <div class="indent">
                                                        <loseComparison></loseComparison>的<compareRole></compareRole>。
                                                    </div>
                                                    <padding>
                                                        <h3><loseComparisonPoint class="scroll" /></h3>
                                                        <div class="indent">
                                                            <loseComparisonRole></loseComparisonRole><comparedCard></comparedCard>的<point></point>。
                                                        </div>
                                                    </padding>
                                                </padding>
                                            </padding>
                                            <h3><damage class="scroll"><damageEnd /></damage></h3>
                                            <div class="indent">
                                                一类<event></event>。可称为<or><damage><dealtBody></dealtBody><damageEnd></damageEnd></damage><orBody></orBody><damage><takeBody></takeBody><damageEnd></damageEnd></damage></or>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><damage><damageRole class="scroll" /></damage></h3>
                                                <div class="indent">
                                                    一名<role></role>。
                                                </div>
                                                <h3><damage><damagedRole class="scroll" /></damage></h3>
                                                <div class="indent">
                                                    一名<role></role>。
                                                </div>
                                                <h3><damage><damageValue class="scroll" /></damage></h3>
                                                <div class="indent">
                                                    一个正整数。
                                                </div>
                                            </padding>
                                            <div class="indent">
                                                包含以下<procedure></procedure>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeDamage class="scroll bold"><dealtBody></dealtBody><beforeDamageEnd></beforeDamageEnd></beforeDamage>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeDamaged class="scroll bold"><takeBody></takeBody><beforeDamageEnd></beforeDamageEnd></beforeDamaged>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenDamage class="scroll bold"><dealtBody></dealtBody><whenDamageEnd></whenDamageEnd></whenDamage>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenDamaged class="scroll bold"><takeBody></takeBody><whenDamageEnd></whenDamageEnd></whenDamaged>”：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                <damage><damagedRole></damagedRole></damage>减少<damage><damageValue></damageValue></damage>点<health></health>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterDamage class="scroll bold"><dealtBody></dealtBody><afterDamageEnd></afterDamageEnd></afterDamage>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterDamaged class="scroll bold"><takeBody></takeBody><afterDamageEnd></afterDamageEnd></afterDamaged>”。
                                                    </div>
                                                </div>
                                            </padding>
                                            <h3><dying class="scroll"><dyingEnd /></dying></h3>
                                            <div class="indent">
                                                一类<event></event>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><dying><dyingRole class="scroll" /></dying></h3>
                                                <div class="indent">
                                                    一名<role></role>。
                                                </div>
                                            </padding>
                                            <div class="indent">
                                                包含以下<procedure></procedure>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenEnteringDying class="scroll bold"></whenEnteringDying>”。
                                                    </div>
                                                    <div class="indent">
                                                        <ifC><dying><dyingRole></dyingRole></dying><health epithet='1'></health>不<greaterC>0</greaterC>，<ifBody></ifBody><advance></advance><tick></tick>“<whenDying class="scroll bold"></whenDying>”(<ifC><dying><dyingRole></dyingRole></dying><health epithet='1'></health><greaterC>0</greaterC>，<ifBody></ifBody><thisC><tick></tick></thisC>的<tickLimit></tickLimit>视为不满足</ifC>)，<else></else>，<advance></advance><tick></tick>“<whenExitingDying class="scroll bold"></whenExitingDying>”</ifC>。
                                                    </div>
                                                    <div class="indent">
                                                        <ifC><dying><dyingRole></dyingRole></dying><health epithet='1'></health epithet='1'>不<greaterC>0</greaterC>，<ifBody></ifBody><die><dieRole class="irreplaceable">其</dieRole><dieEnd></dieEnd></die>，<else></else>，<advance></advance><tick></tick>“<whenExitingDying class="bold"></whenExitingDying>”</ifC>。
                                                    </div>
                                                </div>
                                            </padding><h3><die class="scroll"><dieEnd /></die></h3>
                                            <div class="indent">
                                                一类<event></event>。
                                            </div>
                                            <div class="indent">
                                                包含以下输入：
                                            </div>
                                            <padding>
                                                <h3><die><dieRole class="scroll" /></die></h3>
                                                <div class="indent">
                                                    一名<role></role>。
                                                </div>
                                            </padding>
                                            <div class="indent">
                                                包含以下<procedure></procedure>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<beforeDie class="scroll bold"></beforeDie>”。
                                                    </div>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<whenDie class="scroll bold"></whenDie>”：
                                                    </div>
                                                    <padding>
                                                        <div class="h">
                                                            <div class="indent">
                                                                将<die><dieRole></dieRole></die>的<liveStatus></liveStatus>改为0。
                                                            </div>
                                                            <div class="indent">
                                                                执行<bonus-penalty></bonus-penalty>。
                                                            </div>
                                                        </div>
                                                    </padding>
                                                    <div class="indent">
                                                        <advance></advance><tick></tick>“<afterDie class="scroll bold"></afterDie>”。
                                                    </div>
                                                </div>
                                            </padding>
                                        </padding>
                                    </padding>
                                    <h1><object class="scroll"></object></h1>
                                    <padding>
                                        <h2><inGameBool class="scroll" /></h2>
                                        <div class="indent">
                                            <object></object>的一项<attribute></attribute>。布尔型变量。
                                        </div>
                                        <div class="indent">
                                            未规定<inGameBool></inGameBool>的<card></card>，其的<inGameBool></inGameBool>值视为与其所属<area></area>相等。
                                        </div>
                                        <div class="indent">
                                            未规定<inGameBool></inGameBool>的<area></area>，其的<inGameBool></inGameBool>值视为与其所属<role></role>相等。
                                        </div>
                                        <padding>
                                            <h3><inGame class="scroll" /></h3>
                                            <div class="indent">
                                                <inGameBool></inGameBool>为1。
                                            </div>
                                            <h3><outGame class="scroll" /></h3>
                                            <div class="indent">
                                                <inGameBool></inGameBool>为0。
                                            </div>
                                        </padding>
                                        <h2><tick class="scroll" /></h2>
                                        <div class="indent">
                                            一类<object></object>。
                                        </div>
                                        <div class="indent">
                                            <advance></advance><tick></tick>时，检测所有可执行的<procedure></procedure>，<choose>><chooseBody></chooseBody><priority></priority>最高的<procedure></procedure>之一</choose>，执行，<ifC>包含“<can class="scroll bold"><canHead></canHead></can>”，<ifBody></ifBody><ask></ask>是否执行</ifC>。重复<thisC><process></process></thisC>直到不存在可执行的<procedure></procedure>。
                                        </div>
                                        <div class="indent">
                                            <procedure></procedure>在某<tick></tick>可执行的条件：
                                        </div>
                                        <padding>
                                            <div class="h">
                                                <div class="indent">
                                                    <procedure></procedure>在<currentTick></currentTick>未<or>执行过<orBody></orBody><ask></ask>是否执行</or>过；
                                                </div>
                                                <div class="indent">
                                                    <ifC><procedure></procedure>属于<currentTick></currentTick></ifC>，满足<numberLimit></numberLimit>；
                                                </div>
                                                <div class="indent">
                                                    <ifC><procedure></procedure>不属于<currentTick></currentTick></ifC>，<coordination>满足<or><tickingTimeLimit></tickingTimeLimit><orBody></orBody><tickingTimeLimit></tickingTimeLimit>不存在</or><stativeCoordination></stativeCoordination>满足<tickLimit></tickLimit></coordination>；
                                                </div>
                                                <div class="indent">
                                                    <procedure></procedure>合法；
                                                </div>
                                            </div>
                                        </padding>
                                        <padding>
                                            <h3><currentTick class="scroll" /></h3>
                                            <div class="indent">
                                                正在<advance></advance>的最低<tick></tick>。
                                            </div>
                                            <h3><inherentStage class="scroll" /></h3>
                                            <div class="indent">
                                                一类<tick></tick>。
                                            </div>
                                            <div class="indent">
                                                包含以下<tick></tick>：
                                            </div>
                                            <padding>
                                                <div class="h">
                                                    <div class="indent">
                                                        <inherentPreparingStage />
                                                    </div>
                                                    <div class="indent">
                                                        <inherentDealingStage />
                                                    </div>
                                                    <div class="indent">
                                                        <inherentGettingStage />
                                                    </div>
                                                    <div class="indent">
                                                        <inherentActingStage />
                                                    </div>
                                                    <div class="indent">
                                                        <inherentThrowingStage />
                                                    </div>
                                                    <div class="indent">
                                                        <inherentConcludingStage />
                                                    </div>
                                                </div>
                                            </padding>
                                        </padding>
                                        <h2><ticking class="scroll" /> </h2>
                                        <div class="indent">
                                            一类<object></object>。<tick></tick>的集合。
                                        </div>
                                        <padding>
                                            <h3><inTicking class="scroll"><<ticking></ticking>><inEnd /></inTicking></h3>
                                            <div class="indent">
                                                引用<ticking></ticking>。
                                            </div>
                                            <h3><turn class="scroll" epithet="1"></turn></h3>
                                            <div class="indent">
                                                一种<ticking></ticking>。可简称为<turn></turn>。
                                            </div>
                                            <div class="indent">
                                                包含以下<tick></tick>：
                                            </div>
                                            <padding>
                                                <h3><atTurnStart class="scroll" /></h3>
                                                <h3><inherentPreparingStage class="scroll" /></h3>
                                                <div class="indent">
                                                    包含以下<procedure></procedure>：<advance></advance><preparingStageProcess></preparingStageProcess>。
                                                </div>
                                                <h3><inherentDealingStage class="scroll" /></h3>
                                                <div class="indent">
                                                    包含以下<procedure></procedure>：<advance></advance><dealingStageProcess></dealingStageProcess>。
                                                </div>
                                                <h3><inherentGettingStage class="scroll" /></h3>
                                                <div class="indent">
                                                    包含以下<procedure></procedure>：<advance></advance><gettingStageProcess></gettingStageProcess>。
                                                </div>
                                                <h3><inherentActingStage class="scroll" /></h3>
                                                <div class="indent">
                                                    包含以下<procedure></procedure>：<advance></advance><actingStageProcess></actingStageProcess>。
                                                </div>
                                                <h3><inherentThrowingStage class="scroll" /></h3>
                                                <div class="indent">
                                                    包含以下<procedure></procedure>：<advance></advance><throwingStageProcess></throwingStageProcess>。
                                                </div>
                                                <h3><inherentConcludingStage class="scroll" /></h3>
                                                <div class="indent">
                                                    包含以下<procedure></procedure>：<advance></advance><concludingStageProcess></concludingStageProcess>。
                                                </div>
                                                <h3><atTurnFinish class="scroll" /></h3>
                                            </padding>
                                            <h3><stage class="scroll" epithet="1"/></h3>
                                            <div class="indent">
                                                一类<ticking></ticking>。可简称为<stage></stage>。
                                            </div>
                                            <padding>
                                                <h3><preparingStage class="scroll" /></h3>
                                                <div class="indent">
                                                    一种<stage></stage>。
                                                </div>
                                                <div class="indent">
                                                    包含以下<tick></tick>：
                                                </div>
                                                <padding>
                                                    <h3><atPreparingStageStart class="scroll" /></h3>
                                                    <h3><preparing class="scroll" /></h3>
                                                    <div class="indent">
                                                    </div>
                                                    <h3><atPreparingStageFinish class="scroll" /></h3>
                                                </padding>
                                                <h3><actingStage class="scroll" /></h3>
                                                <div class="indent">
                                                    一种<stage></stage>。
                                                </div>
                                                <div class="indent">
                                                    包含以下<tick></tick>：
                                                </div>
                                                <padding>
                                                    <h3><atActingStageStart class="scroll" /></h3>
                                                    <h3><acting class="scroll" /></h3>
                                                    <div class="indent">
                                                    </div>
                                                    <h3><atActingStageFinish class="scroll" /></h3>
                                                </padding>
                                            </padding>
                                        </padding>
                                        <h2><role class="scroll" /></h2>
                                        <div class="indent">
                                            一类<object></object>。
                                        </div>
                                        <padding>
                                            <h3><roleDefault class="scroll" /></h3>
                                            <div class="indent">
                                                <living></living><role></role>。
                                            </div>
                                            <h3><liveStatus class="scroll" /></h3>
                                            <div class="indent">
                                                <role></role>的一项<attribute></attribute>。布尔型变量。
                                            </div>
                                            <padding>
                                                <h3><living class="scroll" /></h3>
                                                <div class="indent">
                                                    <liveStatus></liveStatus>为1。
                                                </div>
                                                <h3><dead class="scroll" /></h3>
                                                <div class="indent">
                                                    <liveStatus></liveStatus>为0。
                                                </div>
                                            </padding>
                                            <h3>
                                                <a class="button" style="background: rgb(130, 211, 164)" href="./pages/health_bar.html" target="_blank"></a>
                                                <health class="scroll" />
                                            </h3>
                                            <div class="indent">
                                                <role></role>的一项<attribute></attribute>。
                                            </div>
                                            <h3><healthLimit class="scroll" /></h3>
                                            <div class="indent">
                                                <role></role>的一项<attribute></attribute>。
                                            </div>
                                            <h3><lostHealth class="scroll" /></h3>
                                            <div class="indent">
                                                <role></role>的一项<attribute></attribute>。等于其的<healthLimit></healthLimit>-<health epithet='1'></health>。
                                            </div>
                                            <padding>
                                                <h3><damaged class="scroll"></damaged></h3>
                                                <div class="indent">
                                                    <lostHealth epithet='1'></lostHealth><greaterC>0</greaterC>。
                                                </div>
                                                <h3><undamaged class="scroll"></undamaged></h3>
                                                <div class="indent">
                                                    <lostHealth epithet='1'></lostHealth>不<greaterC>0</greaterC>。
                                                </div>
                                            </padding>
                                            <h3><initialHandLimit class="scroll" /></h3>
                                            <div class="indent">
                                                <role></role>的一项<attribute></attribute>。等于其的<health epithet='1'></health>。
                                            </div>
                                            <padding>
                                                <h3><handLimit class="scroll" /></h3>
                                                <div class="indent">
                                                    <role></role>的一项<attribute></attribute>。等于其的<initialHandLimit></initialHandLimit>。至少为0。
                                                </div>
                                            </padding>
                                            <h3><reach class="scroll" /></h3>
                                            <div class="indent">
                                                <role></role>的一项<attribute></attribute>。可简称为<reach epithet="1"></reach>。等于1。
                                            </div>
                                            <padding>
                                                <h3><inReach class="scroll"><<pronoun1><roleDefault></roleDefault></pronoun1>><inHead></inHead><<pronoun2><roleDefault></roleDefault></pronoun2>><inReachEnd></inReachEnd></inReach></h3>
                                                <div class="indent">
                                                    <pronoun2>后者</pronoun2>的<reach></reach>不<lessC><distance><pronoun2>后者</pronoun2><reciprocalMark></reciprocalMark><pronoun1>前者</pronoun1>的<distanceEnd></distanceEnd></distance></lessC>。
                                                </div>
                                            </padding>
                                            <h3><seat class="scroll" /></h3>
                                            <div class="indent">
                                                <role></role>的一项<attribute></attribute>。整型变量。
                                            </div>
                                            <padding>
                                                <h3><roleSeated class="scroll"><<seat></seat>值>号<roleSeatedBody /></roleSeated></h3>
                                                <div class="indent">
                                                    <seat></seat>为该值的<role></role>。
                                                </div>
                                                <h3><seatOrder class="scroll" /></h3>
                                                <div class="indent">
                                                    <role></role>按照<seat></seat>由小到大排序组成的集合。规定<thisC>集合</thisC>末位的后位为首位，首位的前位为末位。
                                                </div>
                                                <h3><nextSeat class="scroll"><nextSeatHead></nextSeatHead>……<seatEnd /></h3>
                                                <div class="indent">
                                                    <seatOrder></seatOrder>中的后某名<living></living><role></role>，后一名则可简称为<nextSeat><nextSeatHead></nextSeatHead><seatEnd></seatEnd></nextSeat>。
                                                </div>
                                                <h3><previousSeat class="scroll"><previousSeatHead></previousSeatHead>……<seatEnd /></h3>
                                                <div class="indent">
                                                    <seatOrder></seatOrder>中的前某名<living></living><role></role>，前一名则可简称为<previousSeat><previousSeatHead></previousSeatHead><seatEnd></seatEnd></previousSeat>。
                                                </div>
                                                <h3><distance class="scroll"><<roleDefault></roleDefault>><reciprocalMark></reciprocalMark><<roleDefault></roleDefault>>的<distanceEnd></distanceEnd></distance></h3>
                                                <div class="indent">
                                                    等于<counts><seat></seat><coordination>在<pronoun1 class="highlight">二者</pronoun1>之间<nominalCoordination></nominalCoordination>不在<pronoun1 class="highlight">二者</pronoun1>之间</coordination>的除<pronoun1 class="highlight">其</pronoun1>外<roleDefault></roleDefault><countsEnd></countsEnd></counts>的<minC>值</minC>，<ifC><pronoun1 class="highlight"></pronoun1>不为同一<role></role>，至少为1，<else></else>，至少为0</ifC>。
                                                </div>
                                            </padding>
                                            <h3><currentTurnRole class="scroll" /></h3>
                                            <div class="indent">
                                                正在<advance></advance><turn></turn>的<role></role>。
                                            </div>
                                        </padding>
                                        <h2><card class="scroll" /></h2>
                                        <div class="indent">
                                            一类<object></object>。
                                        </div>
                                        <padding>
                                            <h3><cardDefault class="scroll" /></h3>
                                            <div class="indent">
                                                <or><handCard></handCard><orBody></orBody><inArea><equipArea></equipArea><inEnd></inEnd></inArea></or>的<card></card>。
                                            </div>
                                            <h3><lyingArea class="scroll" /></h3>
                                            <div class="indent">
                                                <card></card>的一项<attribute></attribute>。一种<area></area>。
                                            </div>
                                            <h3><position class="scroll" /></h3>
                                            <div class="indent">
                                                <card></card>的一项<attribute></attribute>。整型变量。
                                            </div>
                                            <h3><baseCard class="scroll" /></h3>
                                            <padding>
                                                <h3><cardQuote class="scroll"><cardQuoteLeft></cardQuoteLeft>……<cardQuoteRight></cardQuoteRight></cardQuote></h3>
                                                <div class="indent">
                                                    引用<baseCard></baseCard>。
                                                </div>
                                                <h3><cardType class="scroll" /></h3>
                                                <padding>
                                                    <h3><basicCard class="scroll" /></h3>
                                                    <h3><trickCard class="scroll" /></h3>
                                                </padding>
                                                <h3><point class="scroll" /></h3>
                                                <div class="indent">
                                                    一个数字。
                                                </div>
                                            </padding>
                                        </padding>
                                        <h2><area class="scroll" /></h2>
                                        <div class="indent">
                                            一类<object></object>。
                                        </div>
                                        <padding>
                                            <h3><objectInArea class="scroll" /></h3>
                                            <div class="indent"><area></area>的一项属性。可变数组。
                                            </div>
                                            <h3><inArea class="scroll"><<area></area>><inEnd /></inArea></h3>
                                            <div class="indent">
                                                在<area></area>的<objectInArea></objectInArea>中。
                                            </div>
                                            <h3><outArea class="scroll"><<area></area>><outAreaEnd /></outArea></h3>
                                            <div class="indent">
                                                不在<area></area>的<objectInArea></objectInArea>中。
                                            </div>
                                            <h3><top class="scroll"><<area></area>><topEnd /></top></h3>
                                            <div class="indent">
                                                由<area></area><objectInArea></objectInArea>序数小的一侧。
                                            </div>
                                            <h3><bottom class="scroll"><<area></area>><bottomEnd /></bottom></h3>
                                            <div class="indent">
                                                由<area></area><objectInArea></objectInArea>序数大的一侧。
                                            </div>
                                            <h3><visible class="scroll"><visibleBody></visibleBody></visible></h3>
                                            <div class="indent">
                                                <or><area></area><orBody></orBody><card></card></or>的一项<attribute></attribute>。<role></role>的集合。称为<or>集合中的<anyNumber></anyNumber><role></role><visible><visibleBody></visibleBody></visible><thisC><card></card></thisC><orBody></orBody><thisC><card></card></thisC><visible><directedMark></directedMark>集合中的<anyNumber></anyNumber><role></role><visibleBody></visibleBody></visible></or>。
                                            </div>
                                            <div class="indent">
                                                <visible><visibleBody></visibleBody></visible>某<card></card>的<role></role><can></can>随时查看<thisC><card></card></thisC>。
                                            </div>
                                            <div class="indent">
                                                未规定<visible><visibleBody></visibleBody></visible>的<card></card>，其的<visible><visibleBody></visibleBody></visible>值视为与其所属<area></area>相等。
                                            </div>
                                            <h3><forOrAgainst class="scroll" /></h3>
                                            <div class="indent">
                                                <or><area></area><orBody></orBody><card></card></or>的一项<attribute></attribute>。布尔型变量。
                                            </div>
                                            <div class="indent">
                                                未规定<forOrAgainst></forOrAgainst>的<card></card>，其的<forOrAgainst></forOrAgainst>值视为与其所属<area></area>相等。
                                            </div>
                                            <padding>
                                                <h3><for class="scroll" /></h3>
                                                <div class="indent">
                                                    <forOrAgainst></forOrAgainst>为0。
                                                </div>
                                                <h3><against class="scroll" /></h3>
                                                <div class="indent">
                                                    <forOrAgainst></forOrAgainst>为1。
                                                </div>
                                            </padding>
                                            <h3><verticalOrHorizontal class="scroll" /></h3>
                                            <div class="indent">
                                                <or><area></area><orBody></orBody><card></card></or>的一项<attribute></attribute>。布尔型变量。
                                            </div>
                                            <div class="indent">
                                                未规定<verticalOrHorizontal></verticalOrHorizontal>的<card></card>，其的<verticalOrHorizontal></verticalOrHorizontal>值视为与其所属<area></area>相等。
                                            </div>
                                            <padding>
                                                <h3><vertical class="scroll" /></h3>
                                                <div class="indent">
                                                    <verticalOrHorizontal></verticalOrHorizontal>为0。
                                                </div>
                                                <h3><horizontal class="scroll" /></h3>
                                                <div class="indent">
                                                    <verticalOrHorizontal></verticalOrHorizontal>为1。
                                                </div>
                                            </padding>
                                            <h3><apartOrTogether class="scroll" /></h3>
                                            <div class="indent">
                                                <or><area></area><orBody></orBody><card></card></or>的一项<attribute></attribute>。布尔型变量。
                                            </div>
                                            <div class="indent">
                                                未规定<apartOrTogether></apartOrTogether>的<card></card>，其的<apartOrTogether></apartOrTogether>值视为与所属的<area></area>相等。
                                            </div>
                                            <padding>
                                                <h3><apart class="scroll" /></h3>
                                                <div class="indent">
                                                    <apartOrTogether></apartOrTogether>为0。
                                                </div>
                                                <h3><together class="scroll" /></h3>
                                                <div class="indent">
                                                    <apartOrTogether></apartOrTogether>为1。
                                                </div>
                                            </padding>
                                            <h3><treatmentArea class="scroll" /></h3>
                                            <div class="indent">
                                                一种<area></area>。<apart epithet="1"></apart><for></for>。
                                            </div>
                                            <h3><pile class="scroll" /></h3>
                                            <div class="indent">
                                                一种<area></area>。<together epithet="1"></together><against></against>。
                                            </div>
                                            <h3><discardPile class="scroll" /></h3>
                                            <div class="indent">
                                                一种<area></area>。<together epithet="1"></together><for></for>。
                                            </div>
                                            <h3><hand class="scroll" /></h3>
                                            <div class="indent">
                                                一种<area></area>。<apart epithet="1"></apart><against></against>。<visible><directedMark></directedMark>所属<role></role><visibleBody></visibleBody></visible>。
                                            </div>
                                            <padding>
                                                <h3><handCard class="scroll" /></h3>
                                                <div class="indent">
                                                    <inArea><hand></hand><inEnd></inEnd></inArea>的<card></card>。
                                                </div>
                                            </padding>
                                        </padding>
                                        <h2><skill class="scroll" /></h2>
                                        <padding>
                                            <h3><skillQuote class="scroll"><skillQuoteLeft></skillQuoteLeft>……<skillQuoteRight></skillQuoteRight></skillQuote></h3>
                                            <div class="indent">
                                                引用<skill></skill>。
                                            </div>
                                            <h3><lockedSkill class="scroll" /></h3>
                                        </padding>
                                    </padding>
                                </padding>
                            </padding>
                        </main>
                    </div>
                </div>
                <div class="tabs-panel" id="panel_card">
                    <div class="main">
                        <main>
                            <padding>
                                <padding>
                                    <h1><baseCard class="scroll" /></h1>
                                    <padding>
                                        <h2><basicCard class="scroll" /></h2>
                                        <padding>
                                            <h3><attack class="scroll" /></h3>
                                            <div class="indent">
                                                <tickingTimeLimitC><tickingLimit class="irreplaceable"><actingStage></actingStage></tickingLimit><numberLimitC>一</numberLimitC></tickingLimit></tickingTimeLimitC>，<actionType><use><directedMark></directedMark><useTarget class="irreplaceable"><choose><targetNumberLimit class="irreplaceable">一名</targetNumberLimit><distanceLimit class="irreplaceable"><inReach><inReachEnd></inReachEnd>的</inReach></distanceLimit><targetElsRlC></targetElsRlC></choose></useTarget><useBody></useBody></use></actionType>。
                                            </div>
                                            <div class="indent">
                                                <affect><effect></effect></affect>：
                                                <padding>
                                                    <div class="indent">
                                                        <actionType><damage><damageRole class="irreplaceable"><you></you></damageRole><directedMark></directedMark><damagedRole class="irreplaceable">目标</damagedRole><dealtBody></dealtBody><damageValue class="irreplaceable">一点</damageValue><damageEnd></damageEnd></damage></actionType>。
                                                    </div>
                                                </padding>
                                            </div>
                                            <div class="indent">
                                                <whenCC><thisC><card></card></thisC><actionType><directedMark></directedMark><pronoun1><tickQuantifier>一名</tickQuantifier><roleDefault></roleDefault></pronoun1><whenAffect></whenAffect></actionType></whenCC>，<pronoun1>其</pronoun1><can><canHead></canHead><play><playBody></playBody><playedCard class="irreplaceable"><choose><target1zC></target1zC><targetLimit class="irreplaceable"><cardQuoteC><dodge></dodge></cardQuoteC></targetLimit></choose></playedCard><playEffect class="irreplaceable"><offset><offsetEnd></offsetEnd><offsetTarget class="irreplaceable">之</offsetTarget></offset></playEffect></play></can>。
                                            </div>
                                            <h3><dodge class="scroll" /></h3>
                                        </padding>
                                    </padding>
                                </padding>
                            </padding>
                        </main>
                    </div>
                </div>
                <div class="tabs-panel" id="panel_skill">
                    <main>
                        <padding>
                            <padding>
                                <div class="standardCharacterSkillsBlock"></div>
                            </padding>
                        </padding>
                    </main>
                </div>
                <div class="tabs-panel" id="panel_character">
                    <main>
                        <padding>
                            <div class="standardCharactersBlock"></div>
                            <div id="div4" style="height: 500px; background-color: white;"></div>
                        </padding>
                    </main>
                </div>
                <div class="tabs-panel" id="panel_draft">
                    <main>
                        <padding>
                            <textarea id="htmlInput" placeholder="输入HTML代码" style="width: 100%; height: 150px;"></textarea>
                            <div class="draftBlock"></div>
                        </padding>
                        <script type="text/javascript">
                            // 页面加载时恢复内容
                            document.addEventListener('DOMContentLoaded', function () {
                                const savedHtml = localStorage.getItem('draftBlockContent');
                                if (savedHtml) {
                                    document.getElementById('htmlInput').value = savedHtml;
                                    document.querySelector('.draftBlock').innerHTML = savedHtml;
                                }
                            })
                
                            // 实现实时更新并保存到 localStorage
                            document.getElementById('htmlInput').addEventListener('input', function () {
                                const inputHtml = this.value;
                                alert(inputHtml.replace('\\\\', ''))
                                document.querySelector('.draftBlock').innerHTML = inputHtml.replace('\\', ''); // 去除 HTML 标签
                                localStorage.setItem('draftBlockContent', inputHtml) // 保存到 localStorage

                                // 调用目标函数
                                onTextChange(inputHtml)
                            })

                            // 定义要触发的函数
                            function onTextChange(newValue) {
                                console.log("文本框内容已更新:", newValue)
                                draft_block = $('.draftBlock')[0]
                                replace_character_name('base/character.json', draft_block)
                                replace_skill_name('base/skill/strength'+ localStorage.getItem('strength') +'.json', draft_block)
                                replace_card_name('base/card.json', draft_block)
                                replace_term('base/term/dynamic.json', 1, draft_block)
                                replace_term('base/term/fixed.json', 1, draft_block)
                                add_pronoun(draft_block)
                            }
                        </script>
                    </main>
                </div>
            </div>
        </div>
    </div>
</body>


<script>
    // 页面加载时检查登录状态
    document.addEventListener('DOMContentLoaded', function () {
        const token = localStorage.getItem('token');
        if (!token) {
            // 如果没有登录令牌，跳转到登录页面
            window.location.href = 'login.html';
        }
    });
</script>

<script type="text/javascript">
    $(function () {
        $(document).ready(function () {
            $(document).foundation()
        })
        decompress('base/compression.json')
        replace_character_name('base/character.json')
        replace_skill_name('base/skill/strength'+ localStorage.getItem('strength') +'.json')
        replace_card_name('base/card.json')
        check_strength()
        add_button_wave()
        replace_term('base/term/dynamic.json', 1)
        replace_term('base/term/fixed.json', 1)
        add_pronoun()
    })

    function filterParagraphs() {
        var query = document.getElementById('search-input').value.trim().toLowerCase()
        var paragraphs = document.querySelectorAll('.characterParagraph')
        paragraphs.forEach(function(paragraph) {
            var paragraphText = paragraph.textContent.toLowerCase()
            var isMatch = true
            for (var i = 0; i < query.length; i++) {
                if (paragraphText.indexOf(query[i]) === -1) {
                    isMatch = false
                    break
                }
            }
            if (isMatch) {
                paragraph.classList.remove('hidden')
            } else {
                paragraph.classList.add('hidden')
            }
        })
    }
</script>

</html>