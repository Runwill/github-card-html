/* Base modal styles (split from style/modal.css) */

/* Backdrop */
.modal-backdrop {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.5);
  z-index: 9999;
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
  pointer-events: none;
}
.modal-backdrop.show { opacity: 1; pointer-events: auto; display: block; }

/* Modal */
.modal {
  position: fixed !important;
  top: 50% !important; left: 50% !important;
  transform: translate(-50%, -60%) !important;
  background: #fff;
  padding: 20px;
  border: 1px solid #e2e8f0;
  border-radius: 12px;
  box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
  z-index: 10000;
  max-width: 90vw; max-height: 90vh;
  overflow-y: auto;
  display: none; opacity: 0;
  /* 避免在内容高度变化时，modal 自身高度也参与过渡造成“先缩再长”的跳动 */
  transition: opacity 0.3s ease, transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);
  pointer-events: none;
}
.modal.show {
  opacity: 1; display: block; pointer-events: auto;
  transform: translate(-50%, -50%) !important;
}
.modal.update-modal { max-width: 420px; width: 95%; }
.modal.approve-modal { max-width: 600px; width: 95%; max-height: 80vh; }

/* 审核弹窗：空列表时维持合理高度，避免显得过短 */
.modal.approve-modal #pending-approvals-modal-content {
  min-height: 150px;
  position: relative; /* 为空态覆盖提供定位上下文 */
}

/* Info-only modal tweaks */
.modal.modal-info { padding-top: 16px; }
.modal.modal-info .info-row { display: flex; align-items: center; justify-content: space-between; gap: 12px; padding: 10px 4px; border-bottom: 1px dashed #e2e8f0; }
.modal.modal-info .info-row:last-child { border-bottom: none; }
.modal.modal-info .info-label { color: #718096; font-size: 14px; }
.modal.modal-info .info-value { color: #2d3748; font-weight: 600; font-size: 14px; }

/* Badge for role */
.badge { display: inline-block; padding: 4px 10px; border-radius: 999px; font-size: 12px; font-weight: 600; border: 1px solid #e2e8f0; color: #2d3748; background: #f8fafc; }
/* admin -> 黄系 */
.badge.badge-admin { color: #7a5b00; background: #fff3bf; border-color: #ffd666; }
/* moderator -> 紫系 */
.badge.badge-moderator { color: #5b21b6; background: #ede9fe; border-color: #c4b5fd; }
/* user -> 蓝绿色系（teal） */
.badge.badge-user { color: #0f766e; background: #ccfbf1; border-color: #99f6e4; }
/* guest -> 灰白系 */
.badge.badge-guest { color: #4a5568; background: #f7fafc; border-color: #e2e8f0; }

/* Header */
.modal-header {
  display: flex; justify-content: center; align-items: center;
  margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #f1f5f9;
}
.modal-header h2 { margin: 0; color: #1a202c; font-size: 1.25rem; font-weight: 600; }

/* Form */
.modal-form { display: flex; flex-direction: column; gap: 15px; }
.modal-form input {
  width: 100%; padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 8px;
  box-sizing: border-box; font-size: 14px; transition: all .2s ease; background: #fafafa;
}
.modal-form input:focus { outline: none; border-color: #8698ff; box-shadow: 0 0 0 3px rgba(134,152,255,.1); background: #fff; }
.modal-form input::placeholder { color: #a0aec0; }
.modal-form button[type="submit"] {
  width: 100%; padding: 12px 16px; background: linear-gradient(135deg,#8698ff 0%,#7084ff 100%);
  color: #fff; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 500;
  transition: all .2s ease; box-shadow: 0 4px 6px -1px rgba(134,152,255,.2);
}
.modal-form button[type="submit"]:hover { background: linear-gradient(135deg,#7084ff 0%,#5a6cff 100%); transform: translateY(-1px); box-shadow: 0 6px 8px -1px rgba(134,152,255,.3); }
.modal-form button[type="submit"]:active { transform: translateY(0); }
.modal-form button[type="submit"]:disabled { background:#e2e8f0; color:#a0aec0; cursor:not-allowed; transform:none; box-shadow:none; }

/* Messages */
.modal-message { margin-top: 15px; padding: 12px 16px; border-radius: 8px; text-align: center; font-size: 14px; font-weight: 500; transition: all .2s ease; }
.modal-message.success { background: linear-gradient(135deg,#c6f6d5 0%,#d4edda 100%); color:#22543d; border:1px solid #9ae6b4; }
.modal-message.error { background: linear-gradient(135deg,#fed7d7 0%,#f8d7da 100%); color:#742a2a; border:1px solid #fc8181; }

/* Common panel (login page compatible) */
.panel {
  position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.95);
  padding: 20px; border: 1px solid rgba(226,232,240,0.8); background: rgba(255,255,255,0.95);
  -webkit-backdrop-filter: blur(12px); backdrop-filter: blur(12px);
  border-radius: 12px; box-shadow: 0 8px 32px rgba(0,0,0,0.12), 0 4px 16px rgba(0,0,0,0.08);
  z-index: 8000; opacity: 0; visibility: hidden; pointer-events: none;
  transition: opacity .3s ease, transform .3s ease, visibility 0s linear .3s; min-width: 220px;
}
.panel.show { opacity: 1; visibility: visible; pointer-events: auto; transform: translate(-50%, -50%) scale(1); transition: opacity .3s ease, transform .3s ease, visibility 0s linear 0s; }

/* Responsive */
@media (max-width: 768px) {
  /* 注意：不要给 fixed + left:50% + translateX(-50%) 的元素再加 margin，否则会产生水平偏移（left 参照的是 margin box） */
  .modal { margin: 0; max-width: calc(100vw - 30px); max-height: calc(100vh - 30px); padding: 16px; }
  .modal-header h2 { font-size: 1.1rem; }
  .modal.approve-modal { max-height: 85vh; }
}
@media (max-width: 480px) {
  /* 同理，移除 margin，使用更小的 max-width 维持与屏幕边缘的留白 */
  .modal { margin: 0; max-width: calc(100vw - 20px); padding: 12px; }
  .modal-form { gap: 12px; }
  .modal-form input, .modal-form button[type="submit"] { padding: 10px 12px; font-size: 13px; }
}

/* A11y and animations */
@keyframes slideInFromTop { from { opacity: 0; transform: translate(-50%, -60%); } to { opacity: 1; transform: translate(-50%, -50%); } }
@keyframes slideOutToTop { from { opacity: 1; transform: translate(-50%, -50%); } to { opacity: 0; transform: translate(-50%, -60%); } }
.modal:focus { outline: 2px solid #8698ff; outline-offset: 2px; }
@media (prefers-contrast: high) {
  .modal { border: 2px solid #000; }
  .modal-form input { border: 2px solid #000; }
  .modal-form button[type="submit"] { background: #000; border: 2px solid #000; }
}
