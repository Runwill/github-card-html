/* 动画关键帧与通用动画配置 */
@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeInLeft { from { opacity: 0; transform: translateX(-30px); } to { opacity: 1; transform: translateX(0); } }
@keyframes fadeInScale { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
@keyframes slideInFromRight { from { opacity: 0; transform: translateX(50px); } to { opacity: 1; transform: translateX(0); } }
@keyframes textGlow { from { opacity: 0; } to { opacity: 1; } }
@keyframes ripple-animation { to { transform: scale(4); opacity: 0; } }
@keyframes highlight { 0% { background-size: 0% 100%; } 100% { background-size: 100% 100%; } }

h1, h2, h3, .indent, padding {
    opacity: 0;
    transform: translateY(20px);
    animation-fill-mode: both;
    animation-duration: var(--animation-duration);
    animation-timing-function: var(--animation-easing);
    animation-play-state: paused;
}

h1 { animation-name: fadeInScale; animation-delay: 0s; }
h2 { animation-name: fadeInUp; animation-delay: 0.05s; }
h3 { animation-name: fadeInLeft; animation-delay: 0.1s; }
.indent { animation-name: slideInFromRight; animation-delay: 0.15s; opacity: 0; transform: translateX(50px); }
padding { animation-name: fadeInUp; animation-delay: 0.02s; }

.indent .indent { animation-delay: 0.2s; }
.indent .indent .indent { animation-delay: 0.25s; }
padding padding { animation-delay: 0.07s; }
padding padding padding { animation-delay: 0.12s; }

.animate-in { animation-play-state: running; }
.fade-in-on-scroll.visible { opacity: 1; transform: translateY(0); }

.ripple { position: absolute; border-radius: 50%; background: rgba(45, 55, 72, 0.3); transform: scale(0); animation: ripple-animation 0.6s linear; pointer-events: none; }

.button, .wave {
    position: relative;
    overflow: hidden;
    /* 仅对可合成属性做过渡，避免主题切换时对 color/background/box-shadow 的大面积动画 */
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.button:hover, .wave:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); }

html { scroll-behavior: smooth; }

::selection { background: rgba(45, 55, 72, 0.2); color: #2d3748; }

@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
}

.animations-disabled * { animation: none !important; transition: none !important; opacity: 1 !important; transform: none !important; }
.animations-disabled .main { transform: none; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }

.animate-in, .visible { will-change: transform, opacity; }
.animate-in.animation-complete, .visible.animation-complete { will-change: auto; }

.highlight-on-scroll { background: linear-gradient(120deg, transparent 0%, rgba(255, 215, 0, 0.3) 50%, transparent 100%); background-repeat: no-repeat; background-size: 0% 100%; animation: highlight 1s ease-out forwards; }

.smart-fade-in {
    opacity: 0;
    transform: translateY(20px);
    /* 限定为 opacity/transform，避免主题变量变动触发的 repaint 动画 */
    transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1), transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}
.smart-fade-in.loaded { opacity: 1; transform: translateY(0); }
